{% extends "base.html" %}

{% block content %}

<style>
    /* 1. ON AGRANDIT LA SC√àNE (Plus large, plus haute) */
    .scene {
        width: 600px;          /* Plus large pour les formules */
        height: 400px;         /* Plus haut pour le texte */
        max-width: 90vw;       /* S'adapte aux mobiles */
        margin: 40px auto;
        perspective: 1000px;   /* Profondeur 3D am√©lior√©e */
    }

    .card-object {
        width: 100%;
        height: 100%;
        position: relative;
        transition: transform 0.6s;
        transform-style: preserve-3d;
        box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        border-radius: 15px;
        background-color: transparent; /* S√©curit√© */
    }

    /* Classe ajout√©e par AlpineJS pour retourner la carte */
    .card-object.is-flipped {
        transform: rotateY(180deg);
    }

    .card-face {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden; /* Cache le dos */
        
        /* GESTION DU TEXTE TROP LONG */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 20px;
        border-radius: 15px;
        font-size: 1.2rem;
        
        /* Scroll automatique si √ßa d√©passe */
        overflow-y: auto;
        overflow-x: hidden;
    }

    /* Scrollbar plus discr√®te */
    .card-face::-webkit-scrollbar { width: 8px; }
    .card-face::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,0.2); border-radius: 4px; }

    /* COULEURS - Adaptatives au th√®me */
    .card-front {
        background: var(--flashcard-front);
        color: var(--text-primary);
        border: 2px solid var(--border-color);
    }

    .card-back {
        background: var(--flashcard-back);
        color: var(--text-primary);
        transform: rotateY(180deg);
    }

    /* FIX MATHJAX (Pour que les longues formules aient une barre de d√©filement horizontale) */
    mjx-container {
        overflow-x: auto !important;
        overflow-y: hidden !important;
        max-width: 100%;
        padding-bottom: 5px;
    }
</style>

<div class="container text-center">
    <div class="d-flex justify-content-center align-items-center mb-4 mt-2">
        <a href="{{ url_for('flashcards_menu') }}" class="btn btn-outline-secondary btn-sm me-3">Choix</a>
        <h3 class="m-0 text-primary">{{ current_deck if current_deck else 'Jeu de Flashcards' }} üß†</h3>
    </div>

    <div id="zone-carte">
        {% if carte %}
            {% include 'card_fragment.html' %}
        {% else %}
            <div class="alert alert-danger shadow-sm">
                <h4 class="alert-heading">Oups ! üòï</h4>
                <p>Impossible de lire le fichier <b>{{ current_deck }}</b>.</p>
                <hr>
                <p class="mb-0 fs-6">V√©rifie qu'il contient bien des donn√©es s√©par√©es par des virgules.</p>
            </div>
        {% endif %}
    </div>
</div>

{% endblock %}